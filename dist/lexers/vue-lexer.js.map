{"version":3,"file":"vue-lexer.js","names":["parse","compileTemplate","BaseLexer","JavascriptLexer","VueLexer","options","functions","content","filename","keys","Lexer","on","warning","emit","concat","extract","sfc","sourceMap","scriptContent","descriptor","script","templateContent","template","Lexer2","compiledTemplate","source","id","code","Lexer3"],"sources":["../../src/lexers/vue-lexer.js"],"sourcesContent":["import { parse, compileTemplate } from '@vue/compiler-sfc'\n\nimport BaseLexer from './base-lexer.js'\nimport JavascriptLexer from './javascript-lexer.js'\n\nexport default class VueLexer extends BaseLexer {\n  constructor(options = {}) {\n    super(options)\n\n    this.functions = options.functions || ['$t']\n  }\n\n  extract(content, filename) {\n    let keys = []\n\n    const Lexer = new JavascriptLexer()\n    Lexer.on('warning', (warning) => this.emit('warning', warning))\n    keys = keys.concat(Lexer.extract(content))\n\n    // Parse the SFC content\n    const sfc = parse(content, { sourceMap: true, filename })\n    const scriptContent = sfc.descriptor.script\n      ? sfc.descriptor.script.content\n      : ''\n    const templateContent = sfc.descriptor.template\n      ? sfc.descriptor.template.content\n      : ''\n\n    // Extract i18n keys from the script content\n    const Lexer2 = new JavascriptLexer({ functions: this.functions })\n    Lexer2.on('warning', (warning) => this.emit('warning', warning))\n    keys = keys.concat(Lexer2.extract(scriptContent))\n\n    // Compile the template content and extract i18n keys\n    if (templateContent) {\n      const compiledTemplate = compileTemplate({\n        source: templateContent,\n        filename,\n        id: filename,\n      }).code\n      const Lexer3 = new JavascriptLexer({ functions: this.functions })\n      Lexer3.on('warning', (warning) => this.emit('warning', warning))\n      keys = keys.concat(Lexer3.extract(compiledTemplate))\n    }\n\n    return keys\n  }\n}\n"],"mappings":"mjCAAA,SAASA,KAAK,EAAEC,eAAe,QAAQ,mBAAmB;;AAE1D,OAAOC,SAAS,MAAM,iBAAiB;AACvC,OAAOC,eAAe,MAAM,uBAAuB;;AAE9BC,QAAQ;EAC3B,oBAA0B,eAAdC,OAAO,uEAAG,CAAC,CAAC;IACtB,0BAAMA,OAAO;;IAEb,MAAKC,SAAS,GAAGD,OAAO,CAACC,SAAS,IAAI,CAAC,IAAI,CAAC;EAC9C,CAAC;;IAED,iBAAQC,OAAO,EAAEC,QAAQ,EAAE;MACzB,IAAIC,IAAI,GAAG,EAAE;;MAEb,IAAMC,KAAK,GAAG,IAAIP,eAAe,EAAE;MACnCO,KAAK,CAACC,EAAE,CAAC,SAAS,EAAE,UAACC,OAAO,UAAK,MAAI,CAACC,IAAI,CAAC,SAAS,EAAED,OAAO,CAAC,GAAC;MAC/DH,IAAI,GAAGA,IAAI,CAACK,MAAM,CAACJ,KAAK,CAACK,OAAO,CAACR,OAAO,CAAC,CAAC;;MAE1C;MACA,IAAMS,GAAG,GAAGhB,KAAK,CAACO,OAAO,EAAE,EAAEU,SAAS,EAAE,IAAI,EAAET,QAAQ,EAARA,QAAQ,CAAC,CAAC,CAAC;MACzD,IAAMU,aAAa,GAAGF,GAAG,CAACG,UAAU,CAACC,MAAM;MACvCJ,GAAG,CAACG,UAAU,CAACC,MAAM,CAACb,OAAO;MAC7B,EAAE;MACN,IAAMc,eAAe,GAAGL,GAAG,CAACG,UAAU,CAACG,QAAQ;MAC3CN,GAAG,CAACG,UAAU,CAACG,QAAQ,CAACf,OAAO;MAC/B,EAAE;;MAEN;MACA,IAAMgB,MAAM,GAAG,IAAIpB,eAAe,CAAC,EAAEG,SAAS,EAAE,IAAI,CAACA,SAAS,CAAC,CAAC,CAAC;MACjEiB,MAAM,CAACZ,EAAE,CAAC,SAAS,EAAE,UAACC,OAAO,UAAK,MAAI,CAACC,IAAI,CAAC,SAAS,EAAED,OAAO,CAAC,GAAC;MAChEH,IAAI,GAAGA,IAAI,CAACK,MAAM,CAACS,MAAM,CAACR,OAAO,CAACG,aAAa,CAAC,CAAC;;MAEjD;MACA,IAAIG,eAAe,EAAE;QACnB,IAAMG,gBAAgB,GAAGvB,eAAe,CAAC;UACvCwB,MAAM,EAAEJ,eAAe;UACvBb,QAAQ,EAARA,QAAQ;UACRkB,EAAE,EAAElB;QACN,CAAC,CAAC,CAACmB,IAAI;QACP,IAAMC,MAAM,GAAG,IAAIzB,eAAe,CAAC,EAAEG,SAAS,EAAE,IAAI,CAACA,SAAS,CAAC,CAAC,CAAC;QACjEsB,MAAM,CAACjB,EAAE,CAAC,SAAS,EAAE,UAACC,OAAO,UAAK,MAAI,CAACC,IAAI,CAAC,SAAS,EAAED,OAAO,CAAC,GAAC;QAChEH,IAAI,GAAGA,IAAI,CAACK,MAAM,CAACc,MAAM,CAACb,OAAO,CAACS,gBAAgB,CAAC,CAAC;MACtD;;MAEA,OAAOf,IAAI;IACb,CAAC,uBAzCmCP,SAAS,WAA1BE,QAAQ"}